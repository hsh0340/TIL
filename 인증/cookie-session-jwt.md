# Cookie, Session, Token

## HTTP의 특성
### connectionless
> 클라이언트가 요청을 한 후 응답을 받으면 그 연결을 끊어버리는 특징

### stateless
> 통신이 끝나면 상태를 유지하지 않는 특징

- 이러한 상태를 해결하기 위해 cookie와 session을 사용함.

## Cookie
> 인터넷에서 사용자를 식별하고 상태정보를 유지하기 위해 사용되는 작은 텍스트파일

- 사용자가 특정 웹사이트를 방문할 때 웹 브라우저에 의해 자동으로 생성됨
- 일반적으로 사용자가 웹사이트에서 수행하는 작업(로그인 정보, 쇼핑카트의 상품 정보, 언어설정 등)을 기억하고, 기억한 정보는 다음에 해당 웹사이트를 방문할 때 브라우저에 의해 자동으로 제공됨
- 웹사이트의 접근성을 높이기 위해 방문자의 기본 언어 설정을 기억하거나, 광고와 마케팅에 활용하기 위해 방문자의 검색 및 구매 이력을 추적할 수도 있음
- 개인정보 보호와 관련된 문제가 있음

### 쿠키가 최초로 만들어지는 순간
- 쿠키는 서버에서 생성하여 클라이언트에 전송함
- 쿠키가 최초로 만들어지는 순간은 서버에서 클라이언트(웹 브라우저)로 응답을 보낼 때
- 서버는 response header에 Set-Cookie 헤더를 포험시켜서 쿠키를 생성하고 클라이언트에게 전송함
- 이후에는 클라이언트가 서버에 요청을 보낼 때마다 해당 쿠키가 함께 전송됨

### 쿠키의 만료시간
- 쿠키는 만료일을 설정하여 일정 기간동안 유지될 수 있음. 설정하지 않으면 브라우저가 종료될 때 까지 유지됨

## Session
> 웹 서버와 웹 브라우저 간의 상태를 유지하기 위한 메커니즘

- 쿠키와 마찬가지로 세션도 웹 사이트의 사용자 식별 및 상태 유지를 위해 사용됨
- 사용자가 웹 사이트에 접속하면, 웹 서버는 고유한 세션ID를 생성하여 세션쿠키에 저장하고, 사용자의 브라우저에 저장되어 다음 요청시에도 전송됨
  - 웹 서버는 이 세션 ID를 사용하여 사용자의 상태 정보를 유지함
- 세션은 웹 서버에 저장되기 때문에 보안적인 측면에서 쿠키보다 안전함
- 일반적으로 로그인, 사용자 인증, 쇼핑 카트 등에 사용됨
  - 사용자가 웹 사이트에 로그인하면, 세션을 사용하여 로그인한 상태를 유지하고, 로그인하지 않은 사용자는 제한된 기능에만 접근할 수 있도록 함

## Session Cookie
![IMG_0545](https://user-images.githubusercontent.com/73820746/218959338-b7113ec3-2c14-4526-848b-f3ea72629f02.JPG)


### Cookie와 Session Cookie의 차이
- 쿠키
  - 클라이언트에 저장되는 작은 데이터 파일
  - 서버와 클라이언트 간의 상태를 유지할 때 사용
  - 만료일을 지정하여 일정 기간 동안 유지할 수 있으며, 클라이언트에서 삭제하지 않는 이상 계속해서 사용됨
  - 클라이언트의 하드디스크에 파일로 저장되고 만료일이 지정되어있지 않는 이상 계속 사용됨

- Session Cookie
  - 클라이언트가 서버에 요청을 보내면 서버에서 생성되고 클라이언트의 메모리에 저장됨
  - 클라이언트가 브라우저를 종료하면 세션쿠키는 자동으로 삭제됨
  - 세션쿠키는 브라우저를 종료할 때마다 새로운 세션쿠키가 생성되므로 보안에 강함
  - 브라우저의 메모리에 저장되고 브라우저를 종료하면 자동으로 삭제됨

### Cookie만으로 인증 구현해도 될까?
- 가능함. 하지만 쿠키를 탈취당하면 보안상의 문제가 발생할 수 있음

### Session만으로 인증 구현해도 될까?
- 가능함
- 쿠키는 브라우저에 저장되므로 해커가 이를 가로채어서 정보를 탈취할 수 있는 보안 취약점이 있는 반면, 세션은 웹 서버에 저장되기 때문에 이러한 취약점이 없음
- 하지만 세션만 사용하려면 URL 재작성 기술을 사용하여 세션 ID를 웹 페이지 요청에 포함시켜야 하는데, 이는 URL을 통해 세션 ID를 노출시키므로 보안상 취약함



